import{e as g,f as T,i as C,z as b,o as m,c as u,d as f,q as y,b as S,a as k}from"./chunks/framework.04cf2fe5.js";const w="/img/whirl2.svg",B=k("",1),M={__name:"TicketSpiceTestBot",setup(v){const a=g(null),c=g(!1);window.addEventListener("load",()=>{console.log("Window on load"),r()}),T(async()=>{a.value&&setTimeout(()=>{r()},1e3)});function r(){if(c.value)return;c.value=!0;const e=a.value,l=e.store.state;l.clearMessages();const n=e.addMessage();l.updateMessage(n,"Hello! Welcome to TicketSpice. We're here to make your event ticketing experience seamless and affordable. How can I assist you today?");let t="";e.addEventListener("chatbot:send",o=>{console.log(o.detail);const{messages:i,newMessage:d}=o.detail;if(!i||!i[0]||!d)return;const _=i[i.length-1];e.fetchStream("https://bot-service-poqiruzabq-uc.a.run.app/api/bot/message",{method:"POST",headers:{accept:"text/event-stream","Content-Type":"application/json","Access-Control-Allow-Origin":"null"},body:JSON.stringify({text:_.content}),onmessage:x=>{var p;const h=e.decodeStreamData(x);try{const s=JSON.parse(h);t+=(p=s==null?void 0:s.result)==null?void 0:p.text}catch(s){t+=`Error: ${s.message}`}l.updateMessage(d,t)},onclose:()=>{console.log("close",t),t=""}})}),e.addEventListener("chatbot:send:file",o=>{console.log(o.detail)})}return C(()=>{console.log("On Mounted!")}),(e,l)=>{const n=b("ClientOnly");return m(),u("div",null,[B,f(n,null,{default:y(()=>[S("chat-bot",{ref_key:"ticketSpiceBot",ref:a,name:"TicketSpice",stream:"","custom-request":""},null,512)]),_:1})])}}},N=JSON.parse('{"title":"TicketSpice Bot Test","description":"TicketSpice Bot Test","frontmatter":{"title":"TicketSpice Bot Test","description":"TicketSpice Bot Test","date":"2023-09-29T00:00:00.000Z"},"headers":[],"relativePath":"company/ticketspice_bot_test.md","filePath":"company/ticketspice_bot_test.md"}'),E={name:"company/ticketspice_bot_test.md"},P=Object.assign(E,{setup(v){return(a,c)=>(m(),u("div",null,[f(M)]))}});export{N as __pageData,P as default};
