import{e as g,f as T,i as b,z as C,o as m,c as u,d as f,q as y,b as S,a as k}from"./chunks/framework.04cf2fe5.js";const w="/img/whirl2.svg",B=k("",1),M={__name:"TicketSpiceTestBot",setup(v){const l=g(null),n=g(!1);T(async()=>{l.value&&setTimeout(()=>{r()},1e3)});function r(){if(n.value){console.log("Bot already initialized");return}n.value=!0,console.log("Initializing bot");const e=l.value,a=e.store.state;a.clearMessages();const c=e.addMessage();a.updateMessage(c,"Hello! Welcome to TicketSpice. We're here to make your event ticketing experience seamless and affordable. How can I assist you today?");let t="";e.addEventListener("chatbot:send",o=>{console.log(o.detail);const{messages:i,newMessage:d}=o.detail;if(!i||!i[0]||!d)return;const _=i[i.length-1];e.fetchStream("https://bot-service-poqiruzabq-uc.a.run.app/api/bot/message",{method:"POST",headers:{accept:"text/event-stream","Content-Type":"application/json","Access-Control-Allow-Origin":"null"},body:JSON.stringify({text:_.content}),onmessage:x=>{var p;const h=e.decodeStreamData(x);try{const s=JSON.parse(h);t+=(p=s==null?void 0:s.result)==null?void 0:p.text}catch(s){t+=`Error: ${s.message}`}a.updateMessage(d,t)},onclose:()=>{console.log("close",t),t=""}})}),e.addEventListener("chatbot:send:file",o=>{console.log(o.detail)}),console.log("Bot Initialized")}return b(()=>{console.log("On Mounted!"),window.addEventListener("load",()=>{console.log("Window on load"),r()})}),(e,a)=>{const c=C("ClientOnly");return m(),u("div",null,[B,f(c,null,{default:y(()=>[S("chat-bot",{ref_key:"ticketSpiceBot",ref:l,name:"TicketSpice",stream:"","custom-request":""},null,512)]),_:1})])}}},N=JSON.parse('{"title":"TicketSpice Bot Test","description":"TicketSpice Bot Test","frontmatter":{"title":"TicketSpice Bot Test","description":"TicketSpice Bot Test","date":"2023-09-29T00:00:00.000Z"},"headers":[],"relativePath":"company/ticketspice_bot_test.md","filePath":"company/ticketspice_bot_test.md"}'),E={name:"company/ticketspice_bot_test.md"},P=Object.assign(E,{setup(v){return(l,n)=>(m(),u("div",null,[f(M)]))}});export{N as __pageData,P as default};
